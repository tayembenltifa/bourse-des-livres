<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livres - Bourse Des Livres</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2BA9A1;
            --primary-dark: #23938C;
            --secondary: #FF7F50;
            --light: #F8F9FA;
            --dark: #1A1A1A;
            --gray: #6C757D;
            --light-gray: #E9ECEF;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-family: 'Inter', sans-serif;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: 60px 0;
            text-align: center;
        }

        .page-header h1 {
            font-size: 42px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .page-header p {
            font-size: 18px;
            opacity: 0.9;
        }

        /* Search and Filters */
        .search-section {
            background: var(--white);
            padding: 30px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .search-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            font-size: 16px;
        }

        .search-bar button {
            background: var(--secondary);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .filters-row {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 500;
            color: var(--dark);
            font-size: 14px;
        }

        .filter-group select, .filter-group input {
            padding: 10px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            font-size: 14px;
            min-width: 150px;
        }

        .filter-btn {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .reset-btn {
            background: transparent;
            color: var(--gray);
            border: 1px solid var(--light-gray);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        /* Categories Section */
        .categories-section {
            padding: 40px 0;
            background: var(--white);
        }

        .section-title {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 30px;
            text-align: center;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .category-card {
            background: var(--light);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            text-decoration: none;
            color: inherit;
        }

        .category-card:hover, .category-card.active {
            border-color: var(--primary);
            transform: translateY(-3px);
            background: var(--white);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .category-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .category-card h3 {
            font-size: 16px;
            color: var(--dark);
            font-weight: 600;
        }

        /* Books Grid */
        .books-section {
            padding: 60px 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .books-count {
            color: var(--gray);
            font-size: 16px;
        }

        .sort-select {
            padding: 8px 12px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            font-size: 14px;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .book-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .book-image {
            width: 100%;
            height: 200px;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
        }

        .book-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--secondary);
            color: var(--white);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .book-info {
            padding: 20px;
        }

        .book-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .book-author {
            color: var(--gray);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .book-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .book-genre {
            background: var(--primary);
            color: var(--white);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .book-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .book-seller {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .seller-avatar {
            width: 30px;
            height: 30px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 14px;
        }

        .seller-name {
            font-size: 14px;
            color: var(--gray);
        }

        .contact-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .contact-btn:hover {
            background: var(--primary);
            color: var(--white);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }

        .no-results-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 50px;
        }

        .pagination-btn {
            padding: 8px 16px;
            border: 1px solid var(--light-gray);
            background: var(--white);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }

        .pagination-btn:hover:not(.disabled) {
            border-color: var(--primary);
            color: var(--primary);
        }

        .pagination-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .pagination-btn.disabled {
            background: var(--light-gray);
            color: var(--gray);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .pagination-dots {
            padding: 8px 12px;
            color: var(--gray);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 50px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .footer-column a {
            color: var(--light-gray);
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: var(--light-gray);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                gap: 15px;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .filters-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .filter-group select, .filter-group input {
                width: 100%;
            }
            
            .section-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .categories-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .pagination {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <span>üìö</span>
                    Bourse Des Livres
                </a>
                <div class="nav-links">
                    <a href="livres.html" style="color: var(--primary);">Livres</a>
                    <a href="manuels.html">Manuels</a>
                    <a href="vendre.html">Vendre</a>
                    <a href="messagerie.html">Messagerie</a>
                </div>
                <div class="auth-buttons">
                    <button class="btn btn-outline" onclick="location.href='connexion.html'">Connexion</button>
                    <button class="btn btn-primary" onclick="location.href='inscription.html'">Inscription</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>D√©couvrez tous nos livres</h1>
            <p>Des milliers de livres d'occasion √† petits prix</p>
        </div>
    </section>

    <!-- Search and Filters -->
    <section class="search-section">
        <div class="container">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Rechercher un livre, un auteur, un genre...">
                <button type="button" onclick="performSearch()">üîç Rechercher</button>
            </div>
            <div class="filters-row">
                <div class="filter-group">
                    <label>Genre</label>
                    <select id="genreFilter">
                        <option value="">Tous les genres</option>
                        <option value="roman">Roman</option>
                        <option value="policier">Policier</option>
                        <option value="science-fiction">Science-Fiction</option>
                        <option value="fantastique">Fantastique</option>
                        <option value="biographie">Biographie</option>
                        <option value="histoire">Histoire</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>√âtat</label>
                    <select id="conditionFilter">
                        <option value="">Tous les √©tats</option>
                        <option value="neuf">Neuf</option>
                        <option value="tres-bon">Tr√®s bon</option>
                        <option value="bon">Bon</option>
                        <option value="acceptable">Acceptable</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Prix max</label>
                    <input type="number" id="priceFilter" placeholder="50‚Ç¨ max">
                </div>
                <div class="filter-group">
                    <label>Tri par</label>
                    <select id="sortFilter">
                        <option value="recent">Plus r√©cents</option>
                        <option value="price-asc">Prix croissant</option>
                        <option value="price-desc">Prix d√©croissant</option>
                        <option value="popular">Plus populaires</option>
                    </select>
                </div>
                <button class="filter-btn" type="button" onclick="applyFilters()">Appliquer</button>
                <button class="reset-btn" type="button" onclick="resetFilters()">R√©initialiser</button>
            </div>
        </div>
    </section>

    <!-- Categories -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title">Cat√©gories de livres</h2>
            <div class="categories-grid">
                <a class="category-card active" data-category="all">
                    <div class="category-icon">üìö</div>
                    <h3>Tous les livres</h3>
                </a>
                <a class="category-card" data-category="roman">
                    <div class="category-icon">üìñ</div>
                    <h3>Romans</h3>
                </a>
                <a class="category-card" data-category="policier">
                    <div class="category-icon">üïµÔ∏è</div>
                    <h3>Policiers</h3>
                </a>
                <a class="category-card" data-category="science-fiction">
                    <div class="category-icon">üöÄ</div>
                    <h3>Science-Fiction</h3>
                </a>
                <a class="category-card" data-category="fantastique">
                    <div class="category-icon">üêâ</div>
                    <h3>Fantastique</h3>
                </a>
                <a class="category-card" data-category="biographie">
                    <div class="category-icon">üë§</div>
                    <h3>Biographies</h3>
                </a>
                <a class="category-card" data-category="histoire">
                    <div class="category-icon">üèõÔ∏è</div>
                    <h3>Histoire</h3>
                </a>
            </div>
        </div>
    </section>

    <!-- Books Grid -->
    <section class="books-section">
        <div class="container">
            <div class="section-header">
                <div>
                    <h2 class="section-title" id="booksTitle">Livres disponibles</h2>
                    <div class="books-count" id="booksCount">Chargement...</div>
                </div>
                <select class="sort-select" id="sortSelect">
                    <option value="recent">Trier par: Plus r√©cents</option>
                    <option value="price-asc">Prix croissant</option>
                    <option value="price-desc">Prix d√©croissant</option>
                    <option value="popular">Plus populaires</option>
                </select>
            </div>
            
            <div class="books-grid" id="booksGrid">
                <!-- Les livres seront charg√©s ici par JavaScript -->
            </div>

            <!-- No Results Message -->
            <div class="no-results" id="noResults" style="display: none;">
                <div class="no-results-icon">üîç</div>
                <h3>Aucun livre trouv√©</h3>
                <p>Essayez de modifier vos crit√®res de recherche</p>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination">
                <!-- La pagination sera g√©n√©r√©e par JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Bourse Des Livres</h3>
                    <a href="apropos.html">√Ä propos</a>
                    <a href="contact.html">Contact</a>
                    <a href="#">Carri√®re</a>
                </div>
                <div class="footer-column">
                    <h3>Aide</h3>
                    <a href="#">Centre d'aide</a>
                    <a href="#">Conditions d'utilisation</a>
                    <a href="#">Politique de confidentialit√©</a>
                </div>
                <div class="footer-column">
                    <h3>Communaut√©</h3>
                    <a href="#">Forum</a>
                    <a href="#">Blog</a>
                    <a href="#">√âv√©nements</a>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Bourse Des Livres. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <script>
        // Configuration de la pagination
        const BOOKS_PER_PAGE = 8;
        let currentPage = 1;
        let totalPages = 1;
        let filteredBooks = [];

        // Donn√©es des livres (augment√©es pour tester la pagination)
        const booksData = [
            {
                id: 1, title: "L'√âtranger", author: "Albert Camus", genre: "roman", price: 8, condition: "Neuf",
                seller: { firstName: "Marie", lastName: "L." }, image: "üìò", date: "2024-01-15"
            },
            {
                id: 2, title: "1984", author: "George Orwell", genre: "science-fiction", price: 10, condition: "Tr√®s bon",
                seller: { firstName: "Pierre", lastName: "D." }, image: "üìó", date: "2024-01-14"
            },
            {
                id: 3, title: "Le Petit Prince", author: "Antoine de Saint-Exup√©ry", genre: "roman", price: 6, condition: "Bon",
                seller: { firstName: "Sophie", lastName: "M." }, image: "üìï", date: "2024-01-13"
            },
            {
                id: 4, title: "Harry Potter √† l'√©cole des sorciers", author: "J.K. Rowling", genre: "fantastique", price: 12, condition: "Neuf",
                seller: { firstName: "Thomas", lastName: "R." }, image: "üìô", date: "2024-01-12"
            },
            {
                id: 5, title: "Dune", author: "Frank Herbert", genre: "science-fiction", price: 15, condition: "Tr√®s bon",
                seller: { firstName: "Alice", lastName: "B." }, image: "üìì", date: "2024-01-11"
            },
            {
                id: 6, title: "Les Mis√©rables", author: "Victor Hugo", genre: "roman", price: 7, condition: "Acceptable",
                seller: { firstName: "Jean", lastName: "K." }, image: "üìî", date: "2024-01-10"
            },
            {
                id: 7, title: "Le Seigneur des Anneaux", author: "J.R.R. Tolkien", genre: "fantastique", price: 18, condition: "Bon",
                seller: { firstName: "Lucie", lastName: "P." }, image: "üìí", date: "2024-01-09"
            },
            {
                id: 8, title: "Orgueil et Pr√©jug√©s", author: "Jane Austen", genre: "roman", price: 9, condition: "Neuf",
                seller: { firstName: "√âmilie", lastName: "T." }, image: "üìö", date: "2024-01-08"
            },
            {
                id: 9, title: "Da Vinci Code", author: "Dan Brown", genre: "policier", price: 8, condition: "Tr√®s bon",
                seller: { firstName: "Marc", lastName: "D." }, image: "üîç", date: "2024-01-07"
            },
            {
                id: 10, title: "Steve Jobs", author: "Walter Isaacson", genre: "biographie", price: 14, condition: "Neuf",
                seller: { firstName: "Nicolas", lastName: "F." }, image: "üë§", date: "2024-01-06"
            },
            {
                id: 11, title: "Histoire de France", author: "Jean Carpentier", genre: "histoire", price: 11, condition: "Bon",
                seller: { firstName: "Paul", lastName: "H." }, image: "üèõÔ∏è", date: "2024-01-05"
            },
            {
                id: 12, title: "Millenium", author: "Stieg Larsson", genre: "policier", price: 13, condition: "Tr√®s bon",
                seller: { firstName: "Laura", lastName: "S." }, image: "üïµÔ∏è", date: "2024-01-04"
            },
            {
                id: 13, title: "Voyage au bout de la nuit", author: "Louis-Ferdinand C√©line", genre: "roman", price: 10, condition: "Bon",
                seller: { firstName: "Michel", lastName: "B." }, image: "üìñ", date: "2024-01-03"
            },
            {
                id: 14, title: "Fondation", author: "Isaac Asimov", genre: "science-fiction", price: 12, condition: "Tr√®s bon",
                seller: { firstName: "David", lastName: "G." }, image: "üöÄ", date: "2024-01-02"
            },
            {
                id: 15, title: "Le Nom de la Rose", author: "Umberto Eco", genre: "policier", price: 11, condition: "Bon",
                seller: { firstName: "Catherine", lastName: "M." }, image: "üïµÔ∏è", date: "2024-01-01"
            },
            {
                id: 16, title: "Les Rois maudits", author: "Maurice Druon", genre: "histoire", price: 16, condition: "Neuf",
                seller: { firstName: "Robert", lastName: "L." }, image: "üèõÔ∏è", date: "2023-12-31"
            },
            {
                id: 17, title: "Le Hobbit", author: "J.R.R. Tolkien", genre: "fantastique", price: 14, condition: "Tr√®s bon",
                seller: { firstName: "Sarah", lastName: "K." }, image: "üêâ", date: "2023-12-30"
            },
            {
                id: 18, title: "Une vie", author: "Guy de Maupassant", genre: "roman", price: 8, condition: "Acceptable",
                seller: { firstName: "Patrick", lastName: "R." }, image: "üìñ", date: "2023-12-29"
            },
            {
                id: 19, title: "Sapiens", author: "Yuval Noah Harari", genre: "histoire", price: 15, condition: "Neuf",
                seller: { firstName: "Julie", lastName: "T." }, image: "üèõÔ∏è", date: "2023-12-28"
            },
            {
                id: 20, title: "Le Parfum", author: "Patrick S√ºskind", genre: "roman", price: 9, condition: "Bon",
                seller: { firstName: "Antoine", lastName: "P." }, image: "üìñ", date: "2023-12-27"
            }
        ];

        // √âtat de l'application
        let currentCategory = 'all';
        let currentSearch = '';
        let currentFilters = {
            genre: '',
            condition: '',
            price: '',
            sort: 'recent'
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const currentUser = localStorage.getItem('currentUser');
            
            const authButtons = document.querySelector('.auth-buttons');
            
            if (isLoggedIn === 'true' && currentUser) {
                const userData = JSON.parse(currentUser);
                authButtons.innerHTML = `
                    <span style="margin-right: 15px; color: var(--dark);">Bonjour, ${userData.firstName}</span>
                    <button class="btn btn-outline" onclick="logout()">D√©connexion</button>
                `;
            }

            // Charger les livres
            renderBooks();
            
            // Gestion du contact vendeur
            setupContactButtons();
            
            // Gestion des cat√©gories
            setupCategoryFilters();
            
            // Gestion de la recherche
            setupSearch();
        });

        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        }

        function renderBooks() {
            const booksGrid = document.getElementById('booksGrid');
            const noResults = document.getElementById('noResults');
            const booksCount = document.getElementById('booksCount');
            const booksTitle = document.getElementById('booksTitle');

            // Filtrer les livres
            filteredBooks = filterBooks();
            
            // Calculer la pagination
            totalPages = Math.ceil(filteredBooks.length / BOOKS_PER_PAGE);
            if (currentPage > totalPages) {
                currentPage = 1;
            }

            // Obtenir les livres pour la page actuelle
            const startIndex = (currentPage - 1) * BOOKS_PER_PAGE;
            const endIndex = startIndex + BOOKS_PER_PAGE;
            const booksToShow = filteredBooks.slice(startIndex, endIndex);

            // Mettre √† jour le compteur
            const totalBooks = filteredBooks.length;
            const showingStart = totalBooks > 0 ? startIndex + 1 : 0;
            const showingEnd = Math.min(endIndex, totalBooks);
            booksCount.textContent = `${showingStart}-${showingEnd} sur ${totalBooks} livre${totalBooks > 1 ? 's' : ''}`;
            
            // Mettre √† jour le titre selon la cat√©gorie
            if (currentCategory !== 'all') {
                const categoryNames = {
                    'roman': 'Romans',
                    'policier': 'Policiers',
                    'science-fiction': 'Science-Fiction',
                    'fantastique': 'Fantastique',
                    'biographie': 'Biographies',
                    'histoire': 'Histoire'
                };
                booksTitle.textContent = categoryNames[currentCategory] || currentCategory;
            } else {
                booksTitle.textContent = 'Livres disponibles';
            }

            if (booksToShow.length === 0) {
                booksGrid.style.display = 'none';
                noResults.style.display = 'block';
                document.getElementById('pagination').style.display = 'none';
                return;
            }

            booksGrid.style.display = 'grid';
            noResults.style.display = 'none';
            document.getElementById('pagination').style.display = 'flex';

            // G√©n√©rer le HTML des livres
            booksGrid.innerHTML = booksToShow.map(book => `
                <div class="book-card" data-book-id="${book.id}">
                    <div class="book-image">
                        <span>${book.image}</span>
                        <div class="book-badge">${book.condition}</div>
                    </div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">${book.author}</p>
                        <div class="book-details">
                            <span class="book-genre">${getGenreName(book.genre)}</span>
                            <span class="book-price">${book.price}‚Ç¨</span>
                        </div>
                        <div class="book-seller">
                            <div class="seller-avatar">${book.seller.firstName[0]}</div>
                            <span class="seller-name">${book.seller.firstName} ${book.seller.lastName}</span>
                        </div>
                        <button class="contact-btn" onclick="contactSeller(${book.id})">Contacter le vendeur</button>
                    </div>
                </div>
            `).join('');

            // Mettre √† jour la pagination
            renderPagination();
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }

            pagination.style.display = 'flex';
            
            let paginationHTML = '';

            // Bouton Pr√©c√©dent
            if (currentPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})">‚Äπ Pr√©c√©dent</button>`;
            } else {
                paginationHTML += `<button class="pagination-btn disabled">‚Äπ Pr√©c√©dent</button>`;
            }

            // Pages
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

            // Ajuster si on est pr√®s de la fin
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            // Premi√®re page + points de suspension si n√©cessaire
            if (startPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(1)">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="pagination-dots">...</span>`;
                }
            }

            // Pages visibles
            for (let i = startPage; i <= endPage; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="pagination-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="pagination-btn" onclick="changePage(${i})">${i}</button>`;
                }
            }

            // Derni√®re page + points de suspension si n√©cessaire
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="pagination-dots">...</span>`;
                }
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            // Bouton Suivant
            if (currentPage < totalPages) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})">Suivant ‚Ä∫</button>`;
            } else {
                paginationHTML += `<button class="pagination-btn disabled">Suivant ‚Ä∫</button>`;
            }

            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            if (page < 1 || page > totalPages || page === currentPage) return;
            
            currentPage = page;
            renderBooks();
            
            // Scroll vers le haut de la section des livres
            document.querySelector('.books-section').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        function filterBooks() {
            let filtered = [...booksData];

            // Filtre par cat√©gorie
            if (currentCategory !== 'all') {
                filtered = filtered.filter(book => book.genre === currentCategory);
            }

            // Filtre par recherche
            if (currentSearch) {
                const searchTerm = currentSearch.toLowerCase();
                filtered = filtered.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    getGenreName(book.genre).toLowerCase().includes(searchTerm)
                );
            }

            // Filtre par genre
            if (currentFilters.genre) {
                filtered = filtered.filter(book => book.genre === currentFilters.genre);
            }

            // Filtre par √©tat
            if (currentFilters.condition) {
                filtered = filtered.filter(book => book.condition === currentFilters.condition);
            }

            // Filtre par prix
            if (currentFilters.price) {
                filtered = filtered.filter(book => book.price <= parseInt(currentFilters.price));
            }

            // Tri
            switch (currentFilters.sort) {
                case 'price-asc':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
                case 'recent':
                    filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
                    break;
                case 'popular':
                    // Simuler la popularit√© par le prix (pour l'exemple)
                    filtered.sort((a, b) => b.price - a.price);
                    break;
            }

            return filtered;
        }

        function getGenreName(genre) {
            const genreNames = {
                'roman': 'Roman',
                'policier': 'Policier',
                'science-fiction': 'Science-Fiction',
                'fantastique': 'Fantastique',
                'biographie': 'Biographie',
                'histoire': 'Histoire'
            };
            return genreNames[genre] || genre;
        }

        function setupCategoryFilters() {
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Retirer la classe active de toutes les cartes
                    document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
                    
                    // Ajouter la classe active √† la carte cliqu√©e
                    this.classList.add('active');
                    
                    // Mettre √† jour la cat√©gorie courante
                    currentCategory = this.getAttribute('data-category');
                    
                    // R√©initialiser √† la premi√®re page
                    currentPage = 1;
                    
                    // Re-rendre les livres
                    renderBooks();
                });
            });
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.querySelector('.search-bar button');
            
            // Recherche en temps r√©el
            searchInput.addEventListener('input', function() {
                currentSearch = this.value;
                currentPage = 1;
                renderBooks();
            });

            // Recherche par bouton
            searchButton.addEventListener('click', performSearch);
            
            // Recherche par Entr√©e
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            currentSearch = searchInput.value;
            currentPage = 1;
            renderBooks();
            
            // Afficher un feedback visuel
            if (currentSearch) {
                searchInput.style.borderColor = 'var(--primary)';
                setTimeout(() => {
                    searchInput.style.borderColor = '';
                }, 1000);
            }
        }

        function applyFilters() {
            currentFilters = {
                genre: document.getElementById('genreFilter').value,
                condition: document.getElementById('conditionFilter').value,
                price: document.getElementById('priceFilter').value,
                sort: document.getElementById('sortFilter').value
            };
            currentPage = 1;
            renderBooks();
        }

        function resetFilters() {
            document.getElementById('genreFilter').value = '';
            document.getElementById('conditionFilter').value = '';
            document.getElementById('priceFilter').value = '';
            document.getElementById('sortFilter').value = 'recent';
            document.getElementById('searchInput').value = '';
            
            currentSearch = '';
            currentFilters = {
                genre: '',
                condition: '',
                price: '',
                sort: 'recent'
            };
            currentPage = 1;
            
            // R√©activer "Tous les livres"
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
            document.querySelector('.category-card[data-category="all"]').classList.add('active');
            currentCategory = 'all';
            
            renderBooks();
        }

        function contactSeller(bookId) {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            
            if (isLoggedIn !== 'true') {
                alert('Veuillez vous connecter pour contacter un vendeur');
                window.location.href = 'connexion.html';
                return;
            }

            const book = booksData.find(b => b.id === bookId);
            if (book) {
                // Cr√©er une conversation
                createConversation(book);
                alert(`Redirection vers la messagerie pour "${book.title}"`);
                window.location.href = 'messagerie.html';
            }
        }

        function createConversation(book) {
            const conversations = JSON.parse(localStorage.getItem('conversations') || '[]');
            
            const newConversation = {
                id: Date.now(),
                userId: book.seller.firstName.toLowerCase(),
                userName: `${book.seller.firstName} ${book.seller.lastName}`,
                lastMessage: `Int√©ress√©(e) par "${book.title}"`,
                timestamp: new Date().toISOString(),
                unread: 0,
                book: {
                    title: book.title,
                    price: `${book.price}‚Ç¨`
                },
                messages: [
                    {
                        id: 1,
                        content: `Bonjour ! Je suis int√©ress√©(e) par votre livre "${book.title}". Est-il toujours disponible ?`,
                        sender: 'me',
                        timestamp: new Date().toISOString()
                    }
                ]
            };
            
            conversations.push(newConversation);
            localStorage.setItem('conversations', JSON.stringify(conversations));
        }

        function setupContactButtons() {
            // Cette fonction est maintenant int√©gr√©e dans contactSeller()
        }
    </script>
</body>
</html>